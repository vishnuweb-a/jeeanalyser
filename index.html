<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JEE 90-Day Success Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(226, 232, 240, 0.8); }
        .tab-active { border-bottom: 3px solid #3b82f6; color: #3b82f6; font-weight: 700; }
        .checkbox-custom { width: 1.2rem; height: 1.2rem; cursor: pointer; border-radius: 4px; border: 2px solid #cbd5e1; appearance: none; transition: all 0.2s; }
        .checkbox-custom:checked { background-color: #3b82f6; border-color: #3b82f6; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E"); }
        .input-mini { width: 50px; text-align: center; border-bottom: 1px solid #e2e3e5; background: transparent; }
        .input-mini:focus { outline: none; border-bottom: 2px solid #3b82f6; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
            <div>
                <h1 class="text-3xl font-extrabold text-slate-800 tracking-tight">JEE Preparation Tracker</h1>
                <p class="text-slate-500">Target: January - March Syllabus Completion</p>
            </div>
            <div class="flex gap-4">
                <div class="glass-card p-4 rounded-2xl shadow-sm text-center">
                    <span class="block text-xs font-semibold text-slate-400 uppercase">Overall Progress</span>
                    <span id="global-progress" class="text-2xl font-bold text-blue-600">0%</span>
                </div>
                <div class="glass-card p-4 rounded-2xl shadow-sm text-center">
                    <span class="block text-xs font-semibold text-slate-400 uppercase">Avg. Qs/Day</span>
                    <span id="avg-questions" class="text-2xl font-bold text-emerald-600">0</span>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="flex border-b mb-6 overflow-x-auto">
            <button onclick="switchMonth('January')" id="tab-January" class="px-6 py-3 tab-active transition-all">January</button>
            <button onclick="switchMonth('February')" id="tab-February" class="px-6 py-3 text-slate-500 transition-all">February</button>
            <button onclick="switchMonth('March')" id="tab-March" class="px-6 py-3 text-slate-500 transition-all">March</button>
            <button onclick="switchMonth('Analysis')" id="tab-Analysis" class="px-6 py-3 text-slate-500 transition-all flex items-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                Progress Analysis
            </button>
        </div>

        <!-- Content Area -->
        <div id="tracker-container" class="glass-card rounded-3xl shadow-xl overflow-hidden mb-8">
            <div id="table-view" class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-50 border-b text-slate-600 text-sm">
                            <th class="p-4 sticky left-0 bg-slate-50 z-10 w-24">Date</th>
                            <th class="p-4">Wake Up</th>
                            <th class="p-4">Make Bed</th>
                            <th class="p-4">Revision</th>
                            <th class="p-4">Classes</th>
                            <th class="p-4 text-blue-600 font-bold">Physics (Qs)</th>
                            <th class="p-4 text-emerald-600 font-bold">Chemistry (Qs)</th>
                            <th class="p-4 text-purple-600 font-bold">Maths (Qs)</th>
                            <th class="p-4">Daily Total</th>
                        </tr>
                    </thead>
                    <tbody id="tracker-body">
                        <!-- Rows generated by JS -->
                    </tbody>
                </table>
            </div>

            <!-- Analysis View (Hidden by default) -->
            <div id="analysis-view" class="p-8 hidden">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="p-6 bg-white border rounded-2xl">
                        <h3 class="text-lg font-bold mb-4 text-slate-700">Question Solving Trend</h3>
                        <canvas id="questionsChart"></canvas>
                    </div>
                    <div class="p-6 bg-white border rounded-2xl">
                        <h3 class="text-lg font-bold mb-4 text-slate-700">Habit Completion Rates</h3>
                        <canvas id="habitChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center text-slate-400 text-sm">
            <p>Don't stop when you're tired, stop when you're done. Your future self will thank you.</p>
        </div>
    </div>

    <script>
        let currentMonth = 'January';
        const months = {
            'January': 31,
            'February': 28,
            'March': 31
        };

        // Initialize state
        const state = JSON.parse(localStorage.getItem('jeeTrackerState')) || {
            January: {},
            February: {},
            March: {}
        };

        function save() {
            localStorage.setItem('jeeTrackerState', JSON.stringify(state));
            updateStats();
        }

        function createRow(dayNum) {
            const data = state[currentMonth][dayNum] || { 
                wake: false, bed: false, rev: false, cls: false, 
                pq: 0, cq: 0, mq: 0 
            };
            
            return `
                <tr class="border-b hover:bg-slate-50 transition-colors">
                    <td class="p-4 font-bold text-slate-400 sticky left-0 bg-white z-10">${currentMonth.substring(0,3)} ${dayNum}</td>
                    <td class="p-4 text-center">
                        <input type="checkbox" class="checkbox-custom" ${data.wake ? 'checked' : ''} 
                        onchange="updateCell('${dayNum}', 'wake', this.checked)">
                    </td>
                    <td class="p-4 text-center">
                        <input type="checkbox" class="checkbox-custom" ${data.bed ? 'checked' : ''} 
                        onchange="updateCell('${dayNum}', 'bed', this.checked)">
                    </td>
                    <td class="p-4 text-center">
                        <input type="checkbox" class="checkbox-custom" ${data.rev ? 'checked' : ''} 
                        onchange="updateCell('${dayNum}', 'rev', this.checked)">
                    </td>
                    <td class="p-4 text-center">
                        <input type="checkbox" class="checkbox-custom" ${data.cls ? 'checked' : ''} 
                        onchange="updateCell('${dayNum}', 'cls', this.checked)">
                    </td>
                    <td class="p-4 text-center">
                        <input type="number" class="input-mini text-blue-600 font-semibold" value="${data.pq}" 
                        onchange="updateCell('${dayNum}', 'pq', parseInt(this.value) || 0)">
                    </td>
                    <td class="p-4 text-center">
                        <input type="number" class="input-mini text-emerald-600 font-semibold" value="${data.cq}" 
                        onchange="updateCell('${dayNum}', 'cq', parseInt(this.value) || 0)">
                    </td>
                    <td class="p-4 text-center">
                        <input type="number" class="input-mini text-purple-600 font-semibold" value="${data.mq}" 
                        onchange="updateCell('${dayNum}', 'mq', parseInt(this.value) || 0)">
                    </td>
                    <td class="p-4 text-right font-bold text-slate-700" id="total-${dayNum}">
                        ${(data.pq + data.cq + data.mq)}
                    </td>
                </tr>
            `;
        }

        function renderTable() {
            const body = document.getElementById('tracker-body');
            body.innerHTML = '';
            for (let i = 1; i <= months[currentMonth]; i++) {
                body.innerHTML += createRow(i);
            }
        }

        function updateCell(day, field, value) {
            if (!state[currentMonth][day]) state[currentMonth][day] = { wake: false, bed: false, rev: false, cls: false, pq: 0, cq: 0, mq: 0 };
            state[currentMonth][day][field] = value;
            
            const totalCell = document.getElementById(`total-${day}`);
            const d = state[currentMonth][day];
            totalCell.innerText = d.pq + d.cq + d.mq;
            save();
        }

        function switchMonth(month) {
            // UI Updates
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('tab-active'));
            document.querySelectorAll('button').forEach(btn => btn.classList.add('text-slate-500'));
            const activeTab = document.getElementById('tab-' + month);
            activeTab.classList.add('tab-active');
            activeTab.classList.remove('text-slate-500');

            if (month === 'Analysis') {
                document.getElementById('table-view').classList.add('hidden');
                document.getElementById('analysis-view').classList.remove('hidden');
                renderCharts();
            } else {
                document.getElementById('table-view').classList.remove('hidden');
                document.getElementById('analysis-view').classList.add('hidden');
                currentMonth = month;
                renderTable();
            }
        }

        function updateStats() {
            let totalHabits = 0;
            let completedHabits = 0;
            let totalQs = 0;
            let activeDays = 0;

            Object.keys(state).forEach(m => {
                Object.keys(state[m]).forEach(d => {
                    const day = state[m][d];
                    totalHabits += 4;
                    if (day.wake) completedHabits++;
                    if (day.bed) completedHabits++;
                    if (day.rev) completedHabits++;
                    if (day.cls) completedHabits++;
                    
                    const sum = (day.pq || 0) + (day.cq || 0) + (day.mq || 0);
                    totalQs += sum;
                    if (sum > 0) activeDays++;
                });
            });

            const progress = totalHabits === 0 ? 0 : Math.round((completedHabits / totalHabits) * 100);
            document.getElementById('global-progress').innerText = progress + '%';
            document.getElementById('avg-questions').innerText = activeDays === 0 ? 0 : Math.round(totalQs / activeDays);
        }

        let qChart, hChart;

        function renderCharts() {
            const ctxQ = document.getElementById('questionsChart').getContext('2d');
            const ctxH = document.getElementById('habitChart').getContext('2d');

            if (qChart) qChart.destroy();
            if (hChart) hChart.destroy();

            // Prepare Data
            const labels = [];
            const physicsData = [];
            const chemistryData = [];
            const mathsData = [];
            
            const currentMonthDays = state[currentMonth];
            for (let i = 1; i <= months[currentMonth]; i++) {
                labels.push(i);
                const day = currentMonthDays[i] || {};
                physicsData.push(day.pq || 0);
                chemistryData.push(day.cq || 0);
                mathsData.push(day.mq || 0);
            }

            qChart = new Chart(ctxQ, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Physics', data: physicsData, borderColor: '#3b82f6', tension: 0.3 },
                        { label: 'Chemistry', data: chemistryData, borderColor: '#10b981', tension: 0.3 },
                        { label: 'Maths', data: mathsData, borderColor: '#8b5cf6', tension: 0.3 }
                    ]
                },
                options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
            });

            // Habit Chart
            let habits = { wake: 0, bed: 0, rev: 0, cls: 0 };
            const days = Object.values(state[currentMonth]);
            days.forEach(d => {
                if(d.wake) habits.wake++;
                if(d.bed) habits.bed++;
                if(d.rev) habits.rev++;
                if(d.cls) habits.cls++;
            });

            hChart = new Chart(ctxH, {
                type: 'bar',
                data: {
                    labels: ['Wake Up', 'Make Bed', 'Revision', 'Classes'],
                    datasets: [{
                        label: 'Days Completed',
                        data: [habits.wake, habits.bed, habits.rev, habits.cls],
                        backgroundColor: ['#60a5fa', '#34d399', '#f472b6', '#fbbf24']
                    }]
                },
                options: { responsive: true, scales: { y: { beginAtZero: true, max: 31 } } }
            });
        }

        // Init
        renderTable();
        updateStats();

    </script>
</body>
</html>